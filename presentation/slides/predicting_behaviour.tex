\section{Predicting Behaviour}
\begin{frame}{The prediction problem}
\begin{center}
How much time will it take before a bike will be \emph{in a given hotspot}

\includegraphics[width=0.8\linewidth]{graphics/biketime}
\end{center}

\end{frame}

\subsection{Modeling the system}

\begin{frame}{Markov chain}
\begin{itemize}
\item Discrete time markov chain
\item States represent hotspots
\item Time- homogeneous
\end{itemize}
\end{frame}

\begin{frame}{Simple hotspot model}
\input{slides/markov_model_simple}
\end{frame}

\begin{frame}
\begin{center}
Where do we place the black bike?	
\includegraphics[scale=0.7]{graphics/world}
\end{center}
\end{frame}

\begin{frame}{Departure state model}
\input{slides/markov_model_complex}
\end{frame}

\subsection{Creating the model}

\begin{frame}{}
	
\begin{center}
We want to generate the model with data from the GPS receivers on the bikes
	
\includegraphics[width=0.8\linewidth]{graphics/build_the_model}
\end{center}

\end{frame}

\begin{frame}{Locate the bike}
	
\begin{center}

\includegraphics[width=\linewidth]{graphics/createmarkov_initial}


$$
\begin{bmatrix}
0 & 0 & 0 & 0\\
0 & 0 & 0 & 0\\
0 & 0 & 0 & 0\\
0 & 0 & 0 & 0
\end{bmatrix}
$$
\end{center}
	
\end{frame}

\begin{frame}{Track the route of the bike}
	
	\begin{center}
		
		\includegraphics[width=\linewidth]{graphics/createmarkov_firststep}
		
		
		$$
		\begin{bmatrix}
		0 & 1 & 0 & 0\\
		0 & 0 & 0 & 0\\
		0 & 0 & 0 & 0\\
		0 & 0 & 0 & 0
		\end{bmatrix}
		$$
	\end{center}
	
\end{frame}

\begin{frame}{Track the route of the bike}
	
	\begin{center}
		
		\includegraphics[width=\linewidth]{graphics/createmarkov_firststep}
		
		
		$$
		\begin{bmatrix}
		0 & 1 & 0 & 0\\
		0 & 3 & 0 & 0\\
		0 & 0 & 0 & 0\\
		0 & 0 & 0 & 0
		\end{bmatrix}
		$$
	\end{center}
	
\end{frame}

\begin{frame}{Track the route of the bike}
	
	\begin{center}
		
		\includegraphics[width=\linewidth]{graphics/createmarkov_laststep}
		
		
		$$
		\begin{bmatrix}
		0 & 1 & 0 & 0\\
		0 & 3 & 1 & 0\\
		0 & 0 & 0 & 0\\
		0 & 0 & 0 & 0
		\end{bmatrix}
		$$
	\end{center}
	
\end{frame}

\begin{frame}{Normalize the matrix}
	
	\begin{center}
		
		\input{slides/markov_model_complex}
		
		
		$$
		\begin{bmatrix}
			0.65 & 0.3 & 0.05 & 0\\
			0.1  & 0.6 & 0.3  & 0\\
			0.15 & 0   & 0.35 & 0.5\\
			0.2  & 0   & 0.1  & 0.7
		\end{bmatrix} 
		$$
		
	\end{center}
	
\end{frame}

\subsection{Predicting with the model}

\begin{frame}{Find the initial distribution}
	
\begin{center}

\includegraphics[scale=0.7]{graphics/initialworld2}
	
$ (8,2,6,0) $
\end{center}
\end{frame}

\begin{frame}
	

	
\begin{center}	
	
$ P_i \times \tau_M = P_{i+1}$\\

\begin{itemize}
	\item \textbf{$ P_i $} the initial probability
	\item \textbf{$ \tau_M $} - the markov transition function 
\end{itemize}
		
		
$$
(8, 2, 6, 0)
\begin{bmatrix}
0.65 & 0.3 & 0.05 & 0\\
0.1  & 0.6 & 0.3  & 0\\
0.15 & 0   & 0.35 & 0.5\\
0.2  & 0   & 0.1  & 0.7
\end{bmatrix}
=
(6.3, 3.6, 3.1, 3)
$$

$$
(6.3, 3.6, 3.1, 3)
\begin{bmatrix}
0.65 & 0.3 & 0.05 & 0\\
0.1  & 0.6 & 0.3  & 0\\
0.15 & 0   & 0.35 & 0.5\\
0.2  & 0   & 0.1  & 0.7
\end{bmatrix}
=
(5.52,4.05,2.78,3.65)
$$

\end{center}
\end{frame}

\begin{frame}{Predicting with accumulation}
Simulating that bikes never leave the hotspot where the user is waiting

$$ \begin{bmatrix}
	{\color{red}1} & {\color{blue}0} & \color{blue} 0& {\color{blue}0}\\
	0.1  & 0.6 & 0.3  & 0\\
	0.15 & 0   & 0.35 & 0.5\\
	0.2  & 0   & 0.1  & 0.7
\end{bmatrix}
 $$
\end{frame}


\begin{frame}{Two steps of accumulation}
$$
(8, 2, 6, 0)
\begin{bmatrix}
1 & 0 & 0 & 0\\
0.1  & 0.6 & 0.3  & 0\\
0.15 & 0   & 0.35 & 0.5\\
0.2  & 0   & 0.1  & 0.7
\end{bmatrix}
=
(9.1,1.2,2.7,3)
$$
	
$$
(9.1,1.2,2.7,3)
\begin{bmatrix}
1 & 0 & 0 & 0\\
0.1  & 0.6 & 0.3  & 0\\
0.15 & 0   & 0.35 & 0.5\\
0.2  & 0   & 0.1  & 0.7
\end{bmatrix}
=
(10.225,0.72,1.605,3.45)
$$
	
\end{frame}

\begin{frame}{Comparison}
	
		Without accumulation
		$$
		(8,2,6,0)
		{\begin{bmatrix}
		0.65 & 0.3 & 0.05 & 0\\
		0.1  & 0.6 & 0.3  & 0\\
		0.15 & 0   & 0.35 & 0.5\\
		0.2  & 0   & 0.1  & 0.7
		\end{bmatrix}}^2
		=
		(5.52,4.05,2.78,3.65)
		$$
		
		With accumulation
$$
(8,2,6,0)
{\begin{bmatrix}
1 & 0 & 0 & 0\\
0.1  & 0.6 & 0.3  & 0\\
0.15 & 0   & 0.35 & 0.5\\
0.2  & 0   & 0.1  & 0.7
\end{bmatrix}}^2
=
(10.225,0.72,1.605,3.45)
$$
	
\end{frame}
