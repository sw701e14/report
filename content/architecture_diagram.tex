\begin{tikzpicture}[
	path/.style={
		->,
		>=stealth
	},
	every node/.style={font=\sffamily,minimum height=1cm},
	database/.style={
	      cylinder,
	      cylinder uses custom fill,
	      shape border rotate=90,
	      aspect=0.25,
	      draw
	      }
]

% Webservice

\node[draw,circle,minimum size=1cm,inner sep=0pt, xshift=1cm,yshift=-3cm] (V){V};

\node[draw,circle,minimum size=1cm,inner sep=0pt,  xshift=-1cm,yshift=-3cm] (M){M};

\node[draw,circle,minimum size=1cm,inner sep=0pt, above=of V, xshift=-1cm] (C){C};

\node[above=of C, yshift=-1cm](webservice){Web Service};

\draw ($ (webservice.north west) + (-0.8,0.3) $) rectangle ($ (V.south east)+(0.6,-0.6) $);



\node[draw,minimum width=4cm,below=of V, yshift=-1.5cm,
xshift= -2cm,](model){Model};

\node[draw,minimum width=3cm,yshift=0.3cm,left=of model,rotate=90](updater){Model Updater};

% Data
\node [
draw,
below=of model,
minimum width=4cm,
] (data) {Data};

\node[database,below=of data
](database){Database};

\node[above=of updater.north east,yshift=-1cm,xshift=0.7cm](persistency){Business logic};

\draw ($ (persistency.north west) + (-0.3,0.3) $) rectangle ($ (data.east)+ (database.south) - (data.south) +(0.3,-.9) $);

% Data import
\node[draw,minimum width=3cm,right=of model,xshift=0.5cm](datacollector){Data Collector};

% Interface

\node[draw,below=of datacollector](locationsource){Location source};
\node[draw,right=of datacollector, rotate=90,anchor=south,xshift=-1cm,yshift=-0.5cm, minimum width=3cm](common){Common};

\node[above=of datacollector, yshift=-1.2cm,xshift=-0.9cm](dataloading){Data loading};



\draw ($ (dataloading.north west) + (-0.3,0.3) $) rectangle ($ (common.south west)+(0.3,-0.7) $);






% Connecting Arrows

\draw[path] (V.west) -- (M.east);
\draw[path] (C.south) -- (M.north);
\draw[path] (C.south) -- (V.north);

\draw[path] (datacollector.west) -- (model.east);
\draw[path] (datacollector.south) -- (locationsource.north);
\draw[path] (datacollector.east) -- (common.north);
\draw[path] (locationsource.east) -- (common.north);

\draw[path] (M.south) -- (model.north);
\draw[path] (model.south) -- (data.north);
\draw[path] (updater.south) + (0,1.2) -- (model.west);

\draw[path] (data.south) -- (database.north);

\end{tikzpicture}