\section{Architecture}

The project has been structured in order to make it easier to maintain and scalable.
The overall architecture can be seen on \cref{arch}.

\begin{figure}[h]
\center
\input{content/architecture_diagram.tex}
\caption{The architecture of the system}
\label{arch}
\end{figure}

The system is made of three main components, a data collector, the business logic and a web service exposing the functionality to a user.

The following will be a short overview of the different components.

\paragraph{Data Loading}
The data loading component has responsibility for fetching data from a data source.
The \texttt{Data Collector} will periodically ask the \texttt{Location source} for new \texttt{GPSData} and will insert them into the database. 
The handling of incoming \texttt{GPSData} is described in  \cref{}.
\bruno{ref til Data Collector}
The common layer consists of shared types for this component.

\paragraph{Business Logic}
The business logic contains the main functionality of the system.

The model updater contains the main functionality of the application.
It updates the model by finding hotspots and running the markov chain algorithm to calculate the predictions that the users will be shown.
The \texttt{Data} layer provides access to the \texttt{Database}.
The database contains all the data of the running system.
The design of the database can be found in \cref{database_design}.

\paragraph{Web Service}
The webservice is the main interface provided to the users of the system.
The web service will expose an API that the user can use to query data from the system.

The web service consists of an ASP.net MVC project and will be discussed further in \cref{design:web_service}.





