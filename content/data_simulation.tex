
\stefan{en overordnet intro? GOGO STEFAN}
\section{Data Input Simulation}\label{design:datasimulation}
In the running system, locations will be retrieved from a GPS reciever attached on the bikes.
Because we do not have bikes with GPS receivers at our disposal, we need to create a realistic simulation of the behaviour of the system.

\subsection{Point generation}
Because we do not have access to a running system with X amount of bikes sending locations, we have created a simulation of the real system.
This system uses Google Directions to create pseudo-realistic routes and returns the locations at an interval.
In order to generate points that are as realistic as possible we have used the following approach for generating GPS points:

\begin{description}
\item[Create routes with Google directions] The Google Directions API \cite{gdirections} has been used to create realistic looking bike routes.
The API has a variety of settings to restrict the results, including a setting to only get bike routes.
\alexander{Beskriv hvad vi har gjort med Googles API og fjern eksempel fra appendix.}
The result can be either XML or JSON and contains the route structured by a number of ``steps''.\footnote{Actually a route contains a number of  ``legs'' which contains a number ``steps''. 
A leg is a part of a journey and a new leg will be created when changing means of transport or at waypoints.
For our purposes all routes will always contain only one leg.}
Steps are the points where the route changes direction and are the points that would be used to print a directions instruction for the route.
The result of a query to the Google directions API is a route that can be used by a human to find his way to his destination.

\item[Generate intervals] The route generated by Google directions only has points where the route changes direction.
In order to make the generated routes fit with the data generated by a GPS receiver, some points are added between two consecutive points, so that the generated GPS points are spaced out at a interval.
\alexander{Beskriv hvordan vi rigtig har gjort. Ved at bruge intervaller af 5 min.}
The generated GPS points are also delayed randomly.
Lost GPS points are not taken into account.
\alexander{Begrundelse af hvorfor punkter er delayed. Punkter er ikke delayed randomly, men det er random om de er delayed.}

\item[Perturb points to simulate precision] As one of our assumptions about GPS receivers are that they are not 100 \% accurate, and they will therefore not provide accurate locations, we will have to take this into account when generating points with Google Directions.
To simulate this inaccuracy, every generated point will be perturbed by a random value, corresponding to an expected inaccuracy.
This expected inaccuracy should correspond to GPS inaccuracy, which is up to 15 m according to \citet{garmingps}.
\end{description}
