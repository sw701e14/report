In order to test how well our system works we have chosen to perform an integration test of some of the integral parts of the system, the clustering and the predictions.
Because we do not have access to bikes with GPS receivers mounted we have created a simulation that will mimic the real world as close as possible.
This chapter will first explain how we have simulated the real system and will afterwards present the performed integration test.

\section{Data Input Simulation}\label{design:datasimulation}
In the running system, locations will be retrieved from a GPS receiver attached on the bikes.
Because we do not have bikes with GPS receivers at our disposal, we need to create a realistic simulation of the behavior of the system.

\subsection{Point Generation} \label{inputsimulation:pointgeneration}
Because we do not have access to a running system with X amount of bikes sending locations, we have created a simulation of the real system.
This system uses Google Directions to create pseudo-realistic routes and returns the locations at an interval.
In order to generate points that are as realistic as possible we have used the following approach for generating GPS points:

\paragraph{Create routes with Google directions} The Google Directions API \cite{gdirections} has been used to create realistic looking bike routes.
The API has a variety of settings to restrict the results, including a setting to only get bike routes, which is set when generating routes to be used for simulation.
The result is a route, structured by a number of ``steps''.\footnote{Actually a route contains a number of  ``legs'' which contains a number ``steps''. 
A leg is a part of a journey and a new leg will be created when changing means of transport or at waypoints.
For our purposes, all routes will always contain only one leg.}
Steps are the points where the route changes direction and are the points that would be used to print a directions instruction for the route.
The result of a query to the Google directions API is a route that can be used by a human to find his way to his destination.

\paragraph{Generate intervals} The route generated by Google Directions only has points at the steps, as described above.
Our assumptions about how GPS receiver updates are obtained, is with a fixed 5-minute interval.
In order to make the generated routes fit with the data obtained by a GPS receiver, the simulated points must be at the corresponding 5-minute intervals.
To achieve this, points are added onto the generated route, separated by a 5-minute interval.
This way, the final route is consisting of 5-minute interval points, instead of the generated step points.

To further the realisticness, the generated GPS points query time is also delayed randomly, by up to 30 seconds.
Lost GPS locations, which could also be a possibility in an actual system, are not taken into account.


\paragraph{Perturb points to simulate precision} As one of our assumptions about GPS receivers are that they are not 100 \% accurate, and they will therefore not provide accurate locations, we will have to take this into account when generating points with Google Directions.
To simulate this inaccuracy, every generated point will be perturbed by a random value, corresponding to an expected inaccuracy.
This expected inaccuracy should correspond to GPS inaccuracy, which is up to 15 m according to \citet{garmingps}.
