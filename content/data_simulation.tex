\section{Data Input Simulation}\label{design:datasimulation}
\bruno{GPS receiver: A GPS receiver uses satellites from the GPS to calculate its location and then can eg. send the location}
\bruno{Maybe a section about GPS in theory or something... }
In the running system data points will be retrieved from a GPS reciever attached on the bikes.
Because we do not have bikes with GPS receivers at our disposal, we will need to create a simulation of the behaviour the real system would have.

\subsection{Point generation}
Because we do not have access to a running system with 100 bikes sending GPS points, we have created a simulation of the real system.
This system creates GPS points at an interval and uses Google Directions to create realistic looking routes.
In order to generate points that are as realistic as possible we have used the following approach for generating GPS points.

\begin{itemize}
\item Generate a number of bike routes with the Google Directions API
\item Use the generated data points to generate the same route, but with a GPS point for each predefined interval.
\item Move each point a random distance at a random angle in order to simulate GPS precision.
\end{itemize}

The details of these steps will be explained in the following.

\subsubsection{Creating routes with Google directions}

The Google Directions API \cite{gdirections} has been used to create realistic looking bike routes.
The api has a variety of settings to restrict the results, including a setting to only get bike routes.
The result can be either XML or JSON and contains the route structured by a number of  ``legs'' which contains a number of ``steps''.
A leg is a part of a journey and a new leg will be created when changing means of transport or at waypoints.
For our purposes all routes will always contain only one leg.
Steps are the points where the route changes direction and are the points that would be used to print out a direction instruction for the route.
The result of a query to the Google directions API is a route that can be used by a human to find his way to his destination.

\subsubsection{Generating intervals}
The route generated by Google directions only has points where the route changes direction.
In order to make the generated routes look more like the data generated by a GPS sender there is generated points so that the GPS points are spaced out at a predetermined interval.
\stefan{the function is not particularly interesting, pseudocode?}

\subsubsection{Moving points to simulate precision}
The GPS senders are not 100\% reliable, and they will therefore not generate points that look like the ones generated by Google Directions.
To simulate this loss of precision every point generated will be moved a random distance at a random angle.
\stefan{pseudo?}