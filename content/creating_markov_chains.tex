\section{Generating the Model}\label{sec:generatemarkov}
The Markov chain $\mathcal{M}$, described in \cref{markov}, is generated by the steps detailed in this section.
The algorithm takes a set of hotspots $H$ and a set of GPS data. For each hotspot in $H$ there exists a departure state $D_h$.
The result of the algorithm is a matrix with the probabilities for all possible transactions.

\begin{figure}
\begin{enumerate}
\item An empty $n \times n$ matrix with $n = 2|H|$ is created.
\item The GPS data are grouped by bike id into an array of arrays so that each bike is associated with its respective GPS data.
\item The initial state (its latest hotspot) is determined for each bike.
\item Then for each following location, we determine the state for each bike.
\item[4.5] If the old state was a hotspot and the new state is not, then the state is the departure state associated with the previous hotspot.
\item The transition is then added in the matrix.
\item Each entry of each row is then divided by the sum of the row, thus normalizing it.
\end{enumerate}
\label{enum:markov}
\end{figure}
\mikael{Dette burde v√¶re algorithm}
